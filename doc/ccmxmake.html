<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>ccmxmake</title>
  <meta http-equiv="content-type"
 content="text/html; charset=ISO-8859-1">
  <meta name="author" content="Graeme Gill">
</head>
<body>
<h2><b>spectro/ccmxmake</b></h2>
<h3>Summary</h3>
For a particular <span style="font-weight: bold;">Colorimeter</span>
and <span style="font-weight: bold;">Display</span> combination, use a
reference <span style="font-weight: bold;">Spectrometer</span>
instrument to create a correction matrix (<a
 href="File_Formats.html#.ccmx">ccmx</a>). This can then be used to
improve the accuracy
of subsequent Colorimeter measurements on that Display by using it with
the <a href="dispcal.html#X">dispcal</a>,
<a href="dispread.html#X">dispread</a> and <a href="spotread.html#X">spotread</a>
-X
option. See <a href="WideGamutColmters.html">Wide Gamut Displays and
Colorimeters</a> for more information on why this may be useful.<br>
<br>
A list of contributed <span style="font-weight: bold;">ccmx</span>
files is <a href="ccmxs.html">here</a>.<br>
<h3>Usage Summary</h3>
<small style="font-family: monospace;">ccmxmake [-options]
correction.ccmx<br>
</small><small style="font-family: monospace;">&nbsp;<a href="#v">-v</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp; &nbsp; &nbsp; Verbose mode</small><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;</span><font
 style="font-family: monospace;" size="-1"><a href="#display">-display
displayname</a>&nbsp; [X11 only] Choose X11 display name</font><br
 style="font-family: monospace;">
<font style="font-family: monospace;" size="-1"></font><font
 style="font-family: monospace;" size="-1">&nbsp;<a href="#dnm">-d n[,m]</a>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
[X11
only] Choose the display from the following list (default 1),</font><br
 style="font-family: monospace;">
<font style="font-family: monospace;" size="-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
and optionally choose a different display m for VideoLUT access.</font><br
 style="font-family: monospace;">
<font style="font-family: monospace;" size="-1">&nbsp;<a href="#d">-d
n</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Choose the display from the following list (default 1)</font><br
 style="font-family: monospace;">
<font style="font-family: monospace;" size="-1">&nbsp;</font><font
 style="font-family: monospace;" size="-1"><a href="#p">-p</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Use projector mode (if available)</font><br
 style="font-family: monospace;">
<font style="font-family: monospace;" size="-1">&nbsp;<a href="#y">-y
c|l</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Display type, c = CRT, l = LCD</font><br style="font-family: monospace;">
<font style="font-family: monospace;" size="-1">&nbsp;<a href="#P">-P
ho,vo,ss</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Position
test window and scale it</font><br style="font-family: monospace;">
<font style="font-family: monospace;" size="-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
ho,vi: 0.0 = left/top, 0.5 = center, 1.0 = right/bottom etc.</font><br
 style="font-family: monospace;">
<font style="font-family: monospace;" size="-1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
ss: 0.5 = half, 1.0 = normal, 2.0 = double etc.</font><br
 style="font-family: monospace;">
<font style="font-family: monospace;" size="-1">&nbsp;</font><font
 style="font-family: monospace;" size="-1"><a href="#F">-F</a>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Fill whole screen with black background</font><br
 style="font-family: monospace;">
<small style="font-family: monospace;">&nbsp;<span
 style="text-decoration: underline;"></span><a href="#n">-n</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [X11 only] Don't set override redirect
on test
window<br>
</small><font style="font-family: monospace;" size="-1">&nbsp;<a
 href="#N">-N</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Disable auto calibration of instrument</font><small
 style="font-family: monospace;"><br>
</small><span style="font-family: monospace;">&nbsp;</span><font
 style="font-family: monospace;" size="-1"><a href="#H">-H</a>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Use high resolution spectrum mode (if available)<br>
</font><font style="font-family: monospace;" size="-1">&nbsp;<a
 href="#V">-V</a>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Use adaptive measurement mode (if
available)</font><br style="font-family: monospace;">
<font style="font-family: monospace;" size="-1">&nbsp;<a href="#C">-C
"command"</a>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Invoke shell "command"
each
time a color is set<br>
</font><small style="font-family: monospace;">&nbsp;<a href="#o">-o <i>observ</i></a>&nbsp;
&nbsp; &nbsp; &nbsp;
&nbsp;&nbsp;&nbsp;&nbsp; Choose CIE Observer for spectral
data:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp; 1931_2 </small><small
 style="font-family: monospace;"> (def.)</small><small
 style="font-family: monospace;">, 1964_10, S&amp;B
1955_2, shaw, J&amp;V 1978_2</small><br style="font-family: monospace;">
<font style="font-family: monospace;" size="-1"></font><font
 style="font-family: monospace;" size="-1">&nbsp;<a href="#W">-W n|h|x</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Override serial port flow control: n = none, h = HW, x = Xon/Xoff</font><br
 style="font-family: monospace;">
<small style="font-family: monospace;">&nbsp;<a href="#D">-D [level]</a>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Print
debug diagnostics to stderr<br>
</small><small style="font-family: monospace;">&nbsp;<a href="#I">-I
"displayname"</a>
&nbsp;&nbsp;&nbsp;&nbsp; </small><span style="font-family: monospace;">Set
display
make and model description</span><small style="font-family: monospace;"><br>
&nbsp;<a href="#E">-E "description"</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Set the
profile Description string&nbsp; (Default "<span
 style="font-style: italic;">inoutfile</span>")</small><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;</span><font
 style="font-family: monospace;" size="-1"><a href="#file"><span
 style="font-style: italic;">correction.ccmx</span></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
File to save correction to.</font><br style="font-family: monospace;">
<font size="-1"><span style="font-family: monospace;"></span></font><font
 size="-1"><span style="font-family: monospace;"></span></font><small><span
 style="font-family: monospace;"></span><span
 style="font-family: monospace;"></span></small><br>
<h3>Usage Details and Discussion</h3>
<a name="v"></a>The <b>-v</b> flag causes extra information to be
printed out during
chartread operation.<br>
<br>
<a name="display"></a>When running on a UNIX based system that used the
X11
Windowing
System, <b>ccmxmake</b> will by default use the $DISPLAY environment
variable to determine which display and screen to read from. This can
be overridden by supplying an X11 display name to the <span
 style="font-weight: bold;">-display</span> option. Note that if
Xinerama is active, you can't select the screen using $DISPLAY or
-display, you have to select it using the <span
 style="font-weight: bold;">-d</span> parameter.<br>
<br>
<a name="d"></a> By default the main display will be the location of
the test window. If the system has more than
one display or screen, an alternate display/screen can be selected with
the <span style="font-weight: bold;">-d</span> parameter. If you
invoke <b>ccmxmake</b>
so as to display the usage
information (i.e. "dispcal -?" or "dispcal --"), then the discovered
displays/screens will be listed. Multiple displays may not be listed,
if they appear as a single display to the operating system (ie. the
multi-display support is hidden in the video card driver). On UNIX
based system that used the X11
Windowing
System, the <span style="font-weight: bold;">-d</span> parameter will
override the screen specified by the $DISPLAY or parameter.<br>
<br>
<a name="dnm"></a>Because of the difficulty cause by TwinView and
MergedFB in X11 based systems, you can optionally specify a separate
display number after the display that is going to be used to present
test patches, for accessing the VideoLUT hardware. This must be
specified as a single string, e.g. <span style="font-weight: bold;">-d
1,2</span>
. Some experimentation may be needed using <a href="dispwin.html">dispwin</a>
on such systems, to discover what
screen has access to the VideoLUT hardware, and which screens the test
patches appear on.<br>
<br>
<a name="p"></a>The <span style="font-weight: bold;">-p</span> flag
allows measuring
in projector mode, using
instruments that
support this.<br>
<br>
<a name="y"></a>&nbsp; Display type. Colorimeters can
do a more accurate job if they know what type of display technology
they are measuring. Use <span style="font-weight: bold;">-yc</span> if
you are
calibrating a CRT (Cathode Ray Tube) type monitor or Plasma type
display, and use <span style="font-weight: bold;">-yl</span> if you
are calibrating an LCD
(Liquid Crystal Display). A spectrometer instrument will not need this
option.<br>
<br>
<a name="P"></a> The <span style="font-weight: bold;">-P</span>
parameter allows you to position and size the test patch window. By
default it is places in the center of the screen, and sized
appropriately for the type of instrument. The <span
 style="font-weight: bold;">ho</span> and <span
 style="font-weight: bold;">vo</span> values govern the horizontal and
vertical offset respectively. A value of 0.0 positions the window to
the far left or top of the screen, a value of 0.5 positions it in the
center of the screen (the default), and 1.0 positions it to the far
right or bottom of the screen. The <span style="font-weight: bold;">ss</span>
parameter is a scale factor for the test window size. A value of 0.5
for instance, would produce a half sized window. A value of 2.0 will
produce a double size window. Note that the ho,vo,ss numbers must be
specified as a single string (no space between the numbers and the
comma).<br>
For example, to create a double sized test window at the top right of
the screen, use <span style="font-weight: bold;">-P 1,0,2</span> .<br>
<br>
<a name="F"></a> The <span style="font-weight: bold;">-F</span>
flag causes the while screen behind the test window to be masked with
black. This can aid black accuracy when measuring CRT displays or
projectors.<br>
<br>
<a name="n"></a><span style="font-weight: bold;">-n</span> When running
on a UNIX based system that used the X11
Windowing
System, <b>dispcal</b> normally selects the override redirect so that
the
test window will appear above any other windows on the display. On some
systems
this can interfere with window manager operation, and the <b>-n</b>
option
turns this behaviour off.<br>
<br>
<a name="N"></a>The <b>-N</b> option disables the automatic
calibration
of an instrument if it is possible to do so. Sometimes it is awkward to
have to re-calibrate and instrument every time a tool starts, and
unnecessary if the instrument has recently been calibration, and this
switch prevents it happening.<br>
<br>
<a name="L"></a> The -<span style="font-weight: bold;">H</span> option
on high resolution spectral mode, if the instrument
supports it,
such as the Eye-One Pro.
See <a href="instruments.html">Operation of particular instruments</a>
for more details. This may give better accuracy for display
measurements.<br>
<br>
<a name="V"></a> The -<span style="font-weight: bold;">V</span> option
uses adaptive emission measurement mode, if the instrument supports it,
such as the Eye-One Pro. This may give better accuracy for low level
measurements, but may be more inconsistent overall due to the varying
integration times. Overall measurement time will probably be longer.<br>
<br>
<a name="C"></a> The -<span style="font-weight: bold;">C</span> <span
 style="font-weight: bold;">"command" </span>option
allows a method of relaying each test value to some other display than
that on the system running dispcal (for instance, a photo frame, PDA
screen etc.), by causing the given command to be invoked to the shell,
with six arguments. The first three arguments are the RGB test color as
integers in the range 0 to 255, the second three parameters are the RGB
test color as floating point numbers in the range 0.0 to 1.0. The
script or tool should relay the given color to the screen in some
manner (e.g. by generating a raster file of the given color and sending
it to the display being profiled), before returning. Note that a test
window will also be created on the system running dispread.<br>
<br>
<a name="o"></a> The <b>-o</b> flag allows specifying a tristimulus
observer, and is used to compute
tristimulus values from spectral readings.&nbsp; The following choices
are available:<br>
<b>&nbsp; 1931_2</b> selects the standard CIE 1931 2 degree observer.
The default.<br>
&nbsp; <b>1964_10</b> selects the standard CIE 1964 10 degree observer.<br>
&nbsp; <b>1955_2</b> selects the Stiles and Birch 1955 2 degree
observer<br>
&nbsp; <b>1978_2 </b>selects the Judd and Voss 1978 2 degree observer<br>
&nbsp; <b>shaw</b> selects the Shaw and Fairchild 1997 2 degree
observer<br>
<br>
<a name="W"></a>The <b>-W</b> <span style="font-weight: bold;">n|h|x</span>
parameter overrides the default serial communications
flow control setting. The value <span style="font-weight: bold;">n</span>
turns all flow control off, <span style="font-weight: bold;">h</span>
sets hardware handshaking, and <span style="font-weight: bold;">x</span>
sets Xon/Xoff handshaking. This commend may be useful in workaround
serial communications issues with some systems and cables. <br>
<br>
<a name="D"></a>The <b>-D</b> flag causes communications
and other instrument diagnostics to be printed to stdout. A level can
be set between 1 .. 9, that may give progressively more verbose
information, depending on the instrument. This can be useful in
tracking
down why an instrument can't connect.<br>
<br>
<a name="I"></a>The <b>-I</b> parameter allows setting of the display
description string in the resulting <span style="font-weight: bold;">ccmx</span>
file. Since the default display description is probably very generic,
it is <span style="font-weight: bold;">highly recommended</span> that
a description of the make and model of the display be provided here.
The default or given display description will be printed before the
menu. With most command line
shells, it will be necessary to enclose the parameter with double
quotes, so that spaces and other special characters are included in the
parameter, and not mistaken for the start of another flag, or as a
final command line parameters.<br>
<br>
<a name="E"></a>The <b>-E</b> parameter allows overriding the <span
 style="font-weight: bold;">ccmx</span> files overall description tag.
Normally this is not necessary. With
most command line shells, it will be
necessary to enclose the parameter with double quotes, so that spaces
and other special characters are included in the parameter, and not
mistaken for the start of another flag, or as a final command line
parameter. <br>
<br>
<a name="file"></a>The <span
 style="font-weight: bold; font-style: italic;">correction.ccmx</span>
is
the name of the file to save the resulting <a
 href="File_Formats.html#.ccmx">Colorimeter Correction Matrix</a> to.
It is best to give it a short but informative name that includes the
Colorimeter model and the display make and model. By convention it
should have a <span style="font-weight: bold;">.ccmx</span> file
extension.<br>
<br>
<hr style="width: 100%; height: 2px;"><br>
Unlike the other measurement utilities,<span style="font-weight: bold;">
ccmxmake</span> doesn't connect to the
instrument until it is about to make a measurement. This allows for the
possibility of using a different instrument for each measurement.<br>
<br>
It will display a menu:<span style="font-style: italic;"></span><br>
<br>
Press 1 .. 4:<br>
1) Select an instrument, Currently 1 'usb:/bus4/dev2/
(GretagMacbeth i1 Pro)'<br>
2) Measure test patches with current instrument<br>
3) [ Compute Colorimeter Correction Matrix &amp; save it ]<br>
4) Exit<br>
<br>
There are two measurements to be made, after which the correction
matrix can
be computed and saved. Before each measurement, the instrument may need
calibrating.<br>
<br>
One measurement needs a spectral instrument.<br>
<br>
The other measurement needs the Colorimeter that the correction matrix
is being created for.<br>
<br>
There will be a message before the menu indicating which of the
measurements has been completed.<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
</body>
</html>
