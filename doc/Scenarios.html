<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Argyll Overview</title>
  <meta http-equiv="content-type"
 content="text/html; charset=ISO-8859-1">
</head>
<body>
<h2><u>Typical usage Scenarios and Examples</u></h2>
Choose a task from the list below. For more details on alternative
options, follow the links to the individual utilities being used.<br>
<h4><a href="#PM1">Profiling Displays</a></h4>
<h4>&nbsp;&nbsp;&nbsp;&nbsp; <a href="Scenarios.html#PM1a">Calibrating
a
displays</a><span style="font-weight: bold;"></span></h4>
<h4>&nbsp;&nbsp;&nbsp; <a href="#PM2">Creating display test values</a></h4>
<h4> &nbsp;&nbsp;&nbsp; <a href="#PM3">Taking readings from a display</a></h4>
<h4> &nbsp;&nbsp;&nbsp; <a href="Scenarios.html#PM3">Creating a
display profile</a></h4>
<h4><br>
<a href="#PS1">Profiling Scanners</a></h4>
<h4>&nbsp;&nbsp;&nbsp; <a href="#PS2">Types of test charts</a></h4>
<h4>&nbsp;&nbsp;&nbsp; <a href="#PS3">Taking readings from a scanner</a></h4>
<h4>&nbsp;&nbsp;&nbsp; <a href="#PS4">Creating a scanner profile</a></h4>
<h4><br>
<a href="#PP1">Profiling Printers</a></h4>
<h4> &nbsp;&nbsp;&nbsp; <a href="#PP2">Creating a print test chart</a></h4>
<h4> &nbsp;&nbsp;&nbsp; <a href="#PP3">Reading a print test chart
using an instrument</a></h4>
<h4> &nbsp;&nbsp;&nbsp; <a href="#PP4">Reading a print test chart
using a scanner</a></h4>
<h4> </h4>
<h4>&nbsp;&nbsp;&nbsp; <a href="#PP5">Creating a printer profile</a> </h4>
<h4><br>
<a href="#LP1">Linking Profiles</a></h4>
<h4><br>
<a href="#TR1">Transforming colorspaces of raster files</a></h4>
<br>
<hr style="width: 100%; height: 2px;">
<h3><a name="PM1"></a>Profiling Displays</h3>
Currently Argyll supports calibrating and profiling of displays using
one of two
instruments, an Xrite DTP92, or a Gretag Spectrolino. Calibration is a
prior step to profiling, in which the display is adjusted using it's
controls and per channel lookup tables to have a well behaved response,
of the desired type. The process
for creating a display profile is similar to that of all output
devices. First a set of device colorspace test values needs to be
created to exercise the display, then these values need to be
displayed, while taking measurements of the resulting colors using the
instrument. Finally, the device value/measured color values need to be
converted into an ICC profile.<br>
<br>
<h3><a name="PM1a"></a>Calibrating Displays</h3>
The first step is to decide what the target should be for calibration.
This boils down to three things: The desired brightness, the desired
white point, and the desired response curve. The native brightness and
white points of some displays may be different to the desired
characteristics for some purposes. For instance, for graphic arts use,
it might be desirable to run with a warmer white point of about 5000
degrees Kelvin, rather than the default display white point of 6500 to
9000 Kelvin. Some LCD displays are too bright to compare to printed
material under available lighting, so it might be desirable to reduce
the maximum brightness.<br>
<br>
In the current release of Argyll, there is no particular support for
adjusting the display controls. It is up to you to decide how you<br>
will set the brightness, contrast, white point and other controls on
the monitor.<br>
<br>
Once this is done, <a href="dispcal.html">dispcal</a> can be run to
calibrate it. By default the brightness and white point will be kept
the same as the devices natural brightness and white point. The default
response curve is a gamma of 2.2, which is close to that of&nbsp; many
monitors, and close to that of the sRGB colorspace. <br>
<br>
A typical calibration that leaves the brightness and white point alone,
might be:<br>
<br>
<a href="dispcal.html">dispcal</a> -v TargetA<br>
<br>
which will result in a "TargetA.cal" calibration file, that can then be
used during the calibration stage.<br>
<br>
If the absolutely native response of the display is desired during
profiling, then calibration should be skipped, and the linear.cal file
from the "ref" directory used instead as the argument to the -k flag of
dispread.<br>
<br>
<b>dispcal</b> will display a test window in the middle of the screen,
and issue a series of instructions about placing the instrument on the
display. You may need to make sure that the display cursor is not in
the test window, and it may also be necessary to disable any
screensaver before starting the
process.<br>
<h4><a name="PM2"></a>Creating display test values</h4>
The first step in profiling any output device, is to create a set
of device colorspace test values. The important parameters needed are:
<br>
<ul>
  <li>What colorspace does the device use ?</li>
  <li>How many test patches do I want to use ?</li>
  <li>What information do I already have about how the device behaves ?</li>
</ul>
For a display device, &nbsp;the colorspace will be RGB. The number of
test patches will depend somewhat on what quality profile you want to
make, what type of profile you want to make, and how long you are
prepared to wait when testing the display.<br>
At a minimum, a few hundred values are needed. A matrix/shaper type of
profile can get by with fewer test values, while a LUT based profile
will give better results if more test values are used. A typical number
might be 200-600 or so values, while 1000-2000 is not an unreasonable
number for a very high quality characterization of a display.<br>
<br>
To assist the choice of test patch values, it can help to have a rough
idea of how the device behaves. This could be in the form of an ICC
profile of a similar device, or a lower quality, or previous profile
for that particular device. If one were going to make a very high
quality LUT based profile, then it might be worthwhile to make up a
smaller, preliminary shaper/matrix profile using a few hundred test
points, before embarking on testing the device with several thousand.<br>
<br>
Lets say that we ultimately want to make a profile for the device
"DisplayA", the simplest approach is to make a set of test values that
is
independent of the characteristics of the particular device:<br>
<br>
<a href="targen.html">targen</a> <a href="targen.html#v">-v</a> &nbsp;<a
 href="targen.html#d">-d3</a> <a href="targen.html#f">-f500</a> <a
 href="targen.html#p1">DisplayA</a><br>
<br>
If there is a preliminary or previous profile called "OldDisplay"
available, and we want to try creating a "pre-conditioned" set of test
values that will more efficiently sample the device response, then the
following would achieve this:<br>
<u><br>
</u><a href="targen.html"> targen</a> <a href="targen.html#v">-v</a>
&nbsp;<a href="targen.html#d">-d3</a> <a href="targen.html#f">-f500</a>
<a href="targen.html#A">-A.8</a> <a href="targen.html#c">-cOldDisplay.icm</a>
<a href="targen.html#p1">DisplayA</a><br>
<br>
The output of <b>targen</b> will be the file DisplayA.ti1, containing
the device space test values, as well as expected CIE values used for
chart recognition purposes.<br>
<br>
<h4><a name="PM3"></a>Taking readings from a display</h4>
First it is necessary to connect your measurement instrument to your
computer, and check which serial port it is connected to. In the
following example, it is assumed that the instrument is connected to
COM port 1, the
default port. Invoking dispread so as to display the usage information
(by
using a flag -? or --) will list the identified serial ports, and their
labels. If we created a calibration for the display using <a
 href="dispcal.html">dispcal</a>, then we will want to use this when we
take the display readings (e.g. TargetA.cal from the calibration
example)..<br>
<br>
<a href="dispread.html">dispread</a> <a href="dispread.html#v">-v</a> <a
 href="dispread.html#i">-i92</a> <a href="dispread.html#k">-k
TargetA.cal</a> <a href="dispread.html#p1">DisplayA</a><br>
<br>
<br>
To calibrate the DTP92 instrument beforehand, use the <a
 href="dispread.html#a">-a</a> flag, ie:<br>
<br>
<a href="dispread.html">dispread</a> <a href="dispread.html#a">-a</a> <a
 href="dispread.html#i">-i92</a><br>
<br>
and it will go through the process of black level and gray level
calibration.<br>
<br>
<br>
For the Spectrolino , the following command could be used to
characterize the display:<br>
<br>
<a href="dispread.html">dispread</a> <a href="dispread.html#v">-v</a> <a
 href="dispread.html#i">-iSO</a> <a href="dispread.html#k">-k
TargetA.cal</a> <a href="dispread.html#p1">DisplayA</a><br>
<br>
The spectrolino will request calibration using the white tile before in
can be placed on the screen.<br>
<br>
<b>dispread</b> will display a test window in the middle of the screen,
and issue a series of instructions about placing the instrument on the
display. You may need to make sure that the display cursor is not in
the test window, and it may also be necessary to disable any
screensaver before starting the
process.<br>
<br>
<h4><a name="PM4"></a>Creating a display profile</h4>
There are two basic choices of profile type for a display, a
shaper/matrix profile, or a LUT based profile. They have different
tradeoffs. A shaper/matrix profile will work well on a well behaved
display, that is one that behaves in an additive color manner, will
give
very smooth looking results, and needs fewer test points to create. A
LUT based profile on the other hand, will model any display behavior
more accurately, and can accommodate gamut mapping and different intent
tables. Often it can show some unevenness and contouring in the results
though.<br>
<br>
To create a matrix/shaper profile, the following suffices:<br>
<br>
<a href="profile.html">profile</a> <a href="profile.html#v">-v</a> <a
 href="profile.html#E">-D"Display A"</a> <a href="profile.html#q">-qm</a>
<a href="profile.html#a">-as</a> <a href="profile.html#p1">DisplayA</a><br>
<br>
For a LUT based profile, where gamut mapping is desired, then a source
profile will need to be provided to define the source gamut. For
instance, if the display profile was likely to be linked to a CMYK
printing source profile, say "swop.icm", then the following would
suffice:<br>
<br>
<a href="profile.html">profile</a> <a href="profile.html#v">-v</a> <a
 href="profile.html#E">-D"Display A"</a>
<a href="profile.html#q">-qm</a> <a href="profile.html#S">-S</a><a
 href="profile.html#S">
swop.icm</a> <a href="profile.html#c">-c0</a> <a href="profile.html#d">-d2</a>
<a href="profile.html#p1">DisplayA</a><br>
<br>
Make sure you check the delta E report at the end of the profile
creation, to see if the profile is behaving reasonably.<br>
If a calibration file was used with <a href="dispread.html">dispread</a>,
then it will be converted to a vcgt tag in the profile, so that the
operating system or other system color utilities load the lookup curves
into the display hardware, when the profile is used.<br>
<br>
<hr size="2" width="100%">
<h3><a name="PS1"></a>Profiling Scanners</h3>
Because a scanner is an input device, it is necessary to go about
profiling it in quite a different way to an output device. To profile
it, a test chart is needed to exercise the scanner response, to which
the CIE values for each test patch is known. Generally standard
reflection test charts are used for this purpose.<br>
<h4><a name="PS2"></a>Types of test charts</h4>
The most common and popular test chart for scanner profiling is the
IT8.7/2 chart. This is a standard format chart generally reproduced on
photographic film, containing about 264 test patches. The Kodak Q-60
Color Input Target is a typical example:<br>
<br>
<img src="Q60.jpg" alt="Kodak Q60 chart image" height="141" width="200">
<br>
<br>
Another popular chart is the GretagMacbeth ColorChecker DC chart:<br>
<br>
<img src="DC.jpg" alt="GretagMacbeth ColorChecker DC chart" height="122"
 width="200"> <br>
<br>
<h4><a name="PS3"></a>Taking readings from a scanner</h4>
The test chart you are using needs to be placed on the scanner, and the
scanner needs to be configured to a suitable state, and restored to
that
same state when used subsequently with the resulting profile. The chart
should
be scanned, and saved to a TIFF format file. I will assume the
resulting
file is called scanner.tif. The raster file need only be roughly
cropped so as to contain the test chart (including the charts edges).<br>
<br>
The second step is to extract the RGB values from the scanner.tif file.
To locate the patch values in the scan, the <b>scanin</b> utility
needs to
be given a template file that describes the features of the chart, and
how
the test patches are labeled. For an IT8.7/2 chart, this is the <b>it8.ch</b>
file supplied with Argyll. For the ColorChecker DC chart, the
ColorCheckerDC.cht file should be used. For any other type of chart, a
chart recognition template file will need to be created (this is beyond
the scope of the current documentation).<br>
<br>
To create the .ti3 file, the CIE values for each of the patches will
also be needed. For an IT8.7/2 chart, the manufacturer will supply an
individual or batch average file along with the chart containing this
information. Similarly GretagMacbeth supply a ColorCheckerDC reference
file for their chart.<br>
<br>
To create the .ti3 file, run the <b>scanin</b> utility as follows
(assuming an IT8 chart is being used):<br>
<br>
<a href="scanin.html"> scanin</a> -v scanner.tif It8.cht It8ref.txt<br>
<br>
"It8ref.txt" is assumed to be the name of the CIE reference file
supplied by the chart manufacturer. The resulting file will be named "<b>scanner.ti3</b>".<br>
<br>
<span style="font-weight: bold;">scanin</span> will process 16 bit per
component .tiff files, which (if the scanner is capable of creating
such files),&nbsp; may improve the quality of the profile. <br>
<br>
If you have any doubts about the correctness of the chart recognition,
or the subsequent profile's delta E report is unusual, then use the
scanin diagnostic flags <a href="scanin.html#d">-dipn</a> and examine
the <span style="font-weight: bold;">diag.tif</span> diagnostic file.<br>
<h4><a name="PS4"></a>Creating a scanner profile</h4>
Similar to a display profile, a scanner profile can be either a
shaper/matrix or LUT based profile. Well behaved scanners will
probably give the best results
with a shaper/matrix profile, but if the fit is poor, consider using a
LUT
type profile.<br>
<br>
If the purpose of the scanner profile is to use it as a substitute for
a
colorimeter, then the <b>-u</b> flag should be used to avoid clipping
values above the white point. Unless the shaper/matrix type profile is
a very good fit, it is probably advisable to use a LUT type profile in
this situation.<br>
<br>
To create a matrix/shaper profile, the following suffices:<br>
<br>
<a href="profile.html">profile</a> <a href="profile.html#v">-v</a> <a
 href="profile.html#E">-D"Scanner</a> <a href="profile.html#E">A"</a> <a
 href="profile.html#q">-qm</a> <a href="profile.html#a">-as</a>
<a href="profile.html#p1">scanner</a><br>
<br>
For a LUT based profile then the following would be used:<br>
<br>
<a href="profile.html">profile</a> <a href="profile.html#v">-v</a> <a
 href="profile.html#E">-D"Scanner A"</a>
<a href="profile.html#q">-qm</a>
<a href="profile.html#p1">scanner</a><br>
<br>
For the purposes of a poor mans colorimeter, the following would
generally be used:<br>
<br>
<a href="profile.html">profile</a> <a href="profile.html#v">-v</a> <a
 href="profile.html#E">-D"Scanner A"</a>
<a href="profile.html#q">-qm</a> <a href="profile.html#u">-u</a>
<a href="profile.html#p1">scanner</a><br>
<br>
Make sure you check the delta E report at the end of the profile
creation, to see if the profile is behaving reasonably.<br>
<br>
<hr size="2" width="100%">
<h3><a name="PP1"></a>Profiling Printers<br>
</h3>
The overall process is to create a set of device measurement target
values, print them out, measure them, and then create an ICC profile
from the measurements. If the printer is an RGB based printer, then the
process is only slightly more complicated than profiling a display. If
the printer is CMYK based, then some additional parameters are required
to set the total ink limit (TAC) and &nbsp;black generation curve.<br>
<h4><a name="PP2"></a>Creating a print test chart</h4>
The first step in profiling any output device, is to create a set
of device colorspace test values. The important parameters needed are:<br>
<ul>
  <li>What colorspace does the device use ?</li>
  <li>How many test patches do I want to use/what paper size do I want
to use ?</li>
  <li>What instrument am I going to use to read the patches ?<br>
  </li>
  <li>If it is a CMYK device, what is the total ink limit ?<br>
  </li>
  <li>What information do I already have about how the device behaves ?</li>
</ul>
Most printers running through simple drivers will appear as if they are
RGB devices. Other drivers will drive a printer more directly, and will
expect a CMYK profile. [Currently Argyll is not capable of creating an
ICC profile for devices with more colorants than CMYK. When this
capability is introduced, it will by creating an additional separation
profile which then allows the printer to be treated as a CMY or CMYK
printer.] One way of telling what sort
of profile is expected for your device is to examine an existing
profile for
that device using <a href="iccdump.html">iccdump</a>.<br>
<br>
The number of test patches will depend somewhat on what quality profile
you want to make, as well as the effort needed to read the number of
test values. Generally it is convenient to fill a certain paper size
with the maximum
number of test values that will fit.<br>
<br>
At a minimum, for an RGB device, a few hundred values are needed.
For high quality CMYK profiles, 1000-3000 is not an unreasonable number
of
patches.<br>
<br>
To assist the determination of test patch values, it can help to have a
rough idea of how the device behaves. This could be in the form of an
ICC profile of a similar device, or a lower quality, or previous
profile for that particular device. If one were going to make a very
high quality Lut based profile, then it might be worthwhile to make up
a smaller, preliminary shaper/matrix profile using a few hundred test
points, before embarking on testing the device with several thousand.<br>
<br>
The documentation for the <a href="targen.html">targen</a> utility
lists
a
<a href="targen.html#Table">table</a> of
paper
sizes and number of &nbsp;patches for typical situations.<br>
<br>
For a CMYK device, a total ink limit usually needs to be specified.
Sometimes
a device will have a maximum total ink limit set by its manufacturer or
operator,
and some CMYK systems (such as chemical proofing systems) don't have
any
limit. Typical printing devices such as Xerographic printers, inkjet
printers
and printing presses will have a limit. The exact procedure for
determining an
ink limit is outside the scope of this document, but one way of going
about this might be to generate some small (say a few hundred patches)
with targen &amp; pritntarg with different total ink limits, and
printing them out, making the ink limit as large as possible without
striking problems that are caused by too much ink.<br>
<br>
Generally one wants to use the maximum possible amount of ink to
maximize the gamut available on the device. For most CMYK devices, an
ink limit between 200 and 400 is usual, but and ink limit of 250% or
over is generally desirable for reasonably dense blacks and dark
saturated colors. And ink limit of less than 200% will begin to
compromise the fully saturated gamut, as secondary colors (ie
combinations of any two primary colorants) will not be able to reach
full strength.<br>
<br>
Once an ink limit is used in printing the characterization test chart
for a device, it becomes a critical parameter<br>
in knowing what the characterised gamut of the device is. If after
printing the test chart, a greater ink limit<br>
were to be used, the the software would effectively be extrapolating
the device behavior at total ink levels<br>
beyond that used in the test chart, leading to inaccuracies.<br>
<br>
Generally in Argyll, the ink limit is established when creating the
test chart values, and then carried through the<br>
profile making process automatically. Once the profile has been made
however, the ink limit is no longer recorded, and you, the user, will
have to keep track of it if the ICC profile is used in any program than
needs to know the usable gamut of the device.<br>
<br>
<br>
Lets consider two devices in our examples, "PrinterA" which is an RGB
device, and "PrinterB" which is CMYK, and has a target ink limit of
250%.
<br>
<br>
The simplest approach is to make a set of test values that is
independent
of the characteristics of the particular device:<br>
<br>
<a href="targen.html">targen</a> <a href="targen.html#v">-v</a> &nbsp;<a
 href="targen.html#d">-d3</a> <a href="targen.html#f">-f1053</a> <a
 href="targen.html#p1">PrinterA</a><br>
<br>
<a href="targen.html">targen</a> <a href="targen.html#v">-v</a> &nbsp;<a
 href="targen.html#d">-d4</a> <a href="targen.html#l">-l260</a> <a
 href="targen.html#f">-f1053</a> <a href="targen.html#p1">PrinterB</a><br>
<br>
The number of patches chosen here happens to be right for an A4 paper
size being read using a Spectroscan instrument. See the <a
 href="targen.html#Table">table</a> in&nbsp; the <a href="targen.html">targen</a>
documentation for some other suggested numbers.<br>
<br>
If there is a preliminary or previous profile called "OldPrinterA"
available, and we want to try creating a "pre-conditioned" set of test
values that will more efficiently sample the device response, then the
following would achieve this:<u><br>
</u><br>
<a href="targen.html">targen</a> <a href="targen.html#v">-v</a> &nbsp;<a
 href="targen.html#d">-d3</a> <a href="targen.html#f">-f1053</a> <a
 href="targen.html#c">-c OldPrinterA</a> <a href="targen.html#A">-A.8</a>
<a href="targen.html#p1">PrinterA</a><br>
<br>
<a href="targen.html">targen</a> <a href="targen.html#v">-v</a> &nbsp;<a
 href="targen.html#d">-d4</a> <a href="targen.html#l">-l260</a> <a
 href="targen.html#f">-f1053</a> <a href="targen.html#c">-c OldPrinterB</a>
<a href="targen.html#A">-A.8</a> <a href="targen.html#p1">PrinterB</a><br>
<a href="targen.html#p1"></a><br>
<br>
The output of <b>targen</b> will be the file PrinterA.ti1 and
PrinterB.ti1 respectively, containing the device space test values, as
well as expected CIE values used for chart recognition purposes.<br>
<br>
<br>
The next step is turn the test values in to a PostScript test file that
can printed on the device. The basic information that needs to be
supplied is the type of instrument that will be used to read the
patches, as well as the paper size it is to be formatted for.<br>
<br>
For an Xrite DTP41, the following would be typical:<br>
<br>
<a href="printtarg.html">printtarg</a> <a href="printtarg.html#v">-v</a>
<a href="printtarg.html#i">-i41</a> <a href="printtarg.html#p">-pA4</a>
<a href="printtarg.html#p1">PrinterA</a><br>
&nbsp;<br>
For a Gretag Spectroscan, the following would be typical:<br>
<br>
<a href="printtarg.html">printtarg</a> <a href="printtarg.html#v">-v</a>
<a href="printtarg.html#i">-iSS</a> <a href="printtarg.html#p">-pA4R</a>
<a href="printtarg.html#p1">PrinterA</a><br>
<br>
For using with a scanner as a colorimeter, the Gretag Spectroscan
layout is suitable, but the <a href="printtarg.html#s">-s</a> flag
should be used so as to generate a layout suitable for scan
recognition, as well as generating the scan recognition template
files. (You probably want to use less patches with <span
 style="font-weight: bold;">targen</span>, when using the <span
 style="font-weight: bold;">printtarg -s</span> flag, e.g. 1026 patches
for an A4R page, etc.) The following would be typical:<br>
<br>
<a href="printtarg.html">printtarg</a> <a href="printtarg.html#v">-v</a>
<a href="printtarg.html#s">-s</a> <a href="printtarg.html#i">-iSS</a> <a
 href="printtarg.html#p">-pA4R</a> <a href="printtarg.html#p1">PrinterA</a><br>
<span style="font-weight: bold;"><br>
printtarg</span> reads the
PrinterA.ti1
file, creates a PrinterA.ti2 file containing the layout information as
well as the device values and expected CIE values, as well as a
PrinterA.ps file containing the test chart. If the <span
 style="font-weight: bold;">-s</span> flag is used, one or more
PrinterA.cht files is created to allow the <a href="scanin.html">scanin</a>
program to recognize the chart.<br>
<br>
GSview is a good program to use to check what the PostScript file will
look like, without actually printing it out.<br>
<br>
<br>
The last step is to print the chart out.<br>
<br>
Using a suitable PostScript downloader, print the chart out via a
PostScript interpreter. Alternately, an interpreter like GhostScript
or even Photoshop could be used to rasterize the file into something
that can be printed. Note that it is important that the PostScript
interpreter is setup for a device profiling run, and that any sort of
color conversion of color correction be turned off. If the device has a
calibration system, then it would be usual to have setup and calibrated
the device before starting the profiling run. If Photoshop was to be
used, then
either the chart needs to be a single page, or separate .eps files for
each page should be used, so that they can be converted to raster files
one at a time (see the <a href="printtarg#e">-e</a> flag).<br>
<br>
<h4><a name="PP3"></a>Reading a print test chart using an instrument</h4>
Once the test chart has been printed, the color of the patches needs to
be read using a suitable instrument.<br>
<br>
Three different instruments are currently supported, the Xrite DTP51
strip reading colorimeter, the Xrite DTP41 strip reading Spectrometer,
and the GretagMacbeth Spectroscan XY scanning spectrometer.<br>
<br>
The instrument needs to be connected to your computer before running
the <a href="printread.html">printread</a> command. Only serial port
connected Instruments are supported currently. A serial port to USB
adapter
might have to be used if your computer doesn't have any serial ports
(ie. Recent Apple Macs).<br>
<br>
If you run <a href="printread.html">printread</a> so as to print out
its usage message (ie. by using a <span style="font-weight: bold;">-?</span>
or <span style="font-weight: bold;">--</span> flags), then it will
list any identified serial ports, and their corresponding number for
the <a href="printread.html#c">-c</a> option. By default, <a
 href="printread.html">printread</a> will try and find the instrument
on the first available serial port.<br>
<br>
The only arguments required are to select the type of instrument, and
to specify the basename of the .ti2 file. If a non-default serial port
is to be used, then the <span style="font-weight: bold;">-c</span>
option would also be specified.<br>
<br>
&nbsp;e.g. for a Spectroscan:<br>
<br>
<a href="printread.html">printread</a> <a href="printread.html#c">-c2</a>
<a href="printread.html#i">-iSS</a> <a href="printread.html#p1">PrinterA</a><br>
<br>
For a DTP41 to the default serial port:<br>
<br>
<a href="printread.html">printread</a> <a href="printread.html#i">-i41</a>
<a href="printread.html#p1">PrinterA</a><br>
<br>
<span style="font-weight: bold;">printread</span> will interactively
prompt you through the process of reading each sheet or strip. See <a
 href="printread.html">printread</a> for more details on the responses
for each type of instrument. Continue with <a href="Scenarios.html#PP5">Creating
a printer profile</a>.<br>
<h4><a name="PP4"></a>Reading a print test chart using a scanner</h4>
<br>
Argyll supports using a scanner as a substitute for a colorimeter.
While a scanner is no replacement for a color measurement
instrument, it may give acceptable results in some situations, and may
give better results than a generic profile for a printing device.<br>
<br>
The main limitation of the scanner-as-colorimeter approach are:<br>
<br>
* The scanner dynamic range and/or precision may not match the printers
or what is required for a good profile.<br>
* The spectral interaction of the scanner test chart and printer test
chart with the scanner
spectral response can cause color errors.<br>
* Spectral differences caused by different black amounts in the print
test chart can cause
color errors. <br>
* The IT8 chart gamut may be so much smaller than the printers that the
scanner profile is too inaccurate. <br>
<br>
The end result is often a profile that has a slight color cast to,
compared to a profile created using a colorimeter or spectrometer..<br>
<br>
It is assumed that you have created a scanner profile following the <a
 href="#PS1">procedure</a> outline above. For best possible results it
is advisable to both profile the scanner, and use it in scanning the
printed test chart, in as "raw" mode as possible (i.e. using 16 bits
per component scans, if the scanner is
capable of doing so; not setting white or black points). It is
generally advisable to create a LUT type
scanner profile, and use the <a href="profile.html#u">-u</a> flag to
avoid clipping scanned value whiter than the scanner calibration chart.<br>
<br>
Scan your printer chart (or charts) on the scanner previously profiled.
<big><span style="font-weight: bold;">The
scanner must be configured and used exactly the same as it was when it
was profiled.</span></big><br>
<br>
I will assume the resulting scan file is called <span
 style="font-weight: bold;">PrinterB.tif</span> (or <span
 style="font-weight: bold;">PrinterB1.tif</span>, <span
 style="font-weight: bold;">PrinterB2.tif</span> etc. in the case of
multiple charts). As with profiling the scanner, the raster file need
only be roughly cropped so as to contain the test chart.<br>
<br>
The scanner recognition files
created when <span style="font-weight: bold;">printtarg</span> was run
is assumed to be called <span style="font-weight: bold;">PrinterB.cht</span>.
Using the scanner profile created previously (assumed to be called <span
 style="font-weight: bold;">scanner.icm</span>), the printer test chart
scan patches are converted to CIE values using the <span
 style="font-weight: bold;">scanin</span> utility:<br>
<br>
<a href="scanin.html">scanin</a> <a href="scanin.html#v">-v</a> <a
 href="scanin.html#c">-c</a> <a href="scanin.html#cp1">PrinterB.tif</a>
<a href="scanin.html#cp2">PrinterB.cht</a> <a href="scanin.html#cp3">scanner.icm</a>
<a href="scanin.html#cp4">PrinterB</a><br>
<br>
If there were multiple test chart pages, the results would be
accumulated page by page using the <a href="scanin.html#ca">-ca</a>
option, ie., if there were 3 pages:<br>
<br>
<a href="scanin.html">scanin</a> <a href="scanin.html#v">-v</a> <a
 href="scanin.html#c">-c</a> <a href="scanin.html#cp1">PrinterB1.tif</a>
<a href="scanin.html#cp2">PrinterB1.cht</a> <a href="scanin.html#cp3">scanner.icm</a>
<a href="scanin.html#cp4">PrinterB</a><br>
<a href="scanin.html">scanin</a> <a href="scanin.html#v">-v</a> <a
 href="scanin.html#ca">-ca</a> <a href="scanin.html#cp1">PrinterB2.tif</a>
<a href="scanin.html#cp2">PrinterB2.cht</a> <a href="scanin.html#cp3">scanner.icm</a>
<a href="scanin.html#cp4">PrinterB</a><br>
<a href="scanin.html">scanin</a> <a href="scanin.html#v">-v</a> <a
 href="scanin.html#ca">-ca</a> <a href="scanin.html#cp1">PrinterB3.tif</a>
<a href="scanin.html#cp2">PrinterB3.cht</a> <a href="scanin.html#cp3">scanner.icm</a>
<a href="scanin.html#cp4">PrinterB</a><br>
<br>
Now that the <span style="font-weight: bold;">PrinterB.ti3</span> data
has been obtained, the profile continue in the next section with <span
 style="font-weight: bold;">Creating a printer profile</span>.<br>
<br>
If you have any doubts about the correctness of the chart recognition,
or the subsequent profile's delta E report is unusual, then use the
scanin diagnostic flags <a href="scanin.html#d">-dipn</a> and examine
the <span style="font-weight: bold;">diag.tif</span> diagnostic file.<br>
<h4><a name="PP5"></a>Creating a printer profile<br>
</h4>
Creating an RGB based printing profile is very similar to creating a
display device profile. For a CMYK printer, some additional information
is needed to set the black generation.<br>
<br>
Where the resulting profile will be used conventionally (ie. using <a
 href="icclink.html">icclink</a> <a href="icclink.html#s">-s</a>, or <a
 href="cctiff.html">cctiff</a> <a href="cctiff.html#l">-l</a> or most
other "dumb" CMMs) it is important to specify that gamut mapping should
be computed for the output (B2A) perceptual and saturation tables. This
is done by specifying a device profile as the parameter to the <a
 href="profile.html">profile</a> <a href="profile.html#S">-S</a> flag.
When you intend to create a "general use" profile, it can be a good
technique to specify the source gamut as the opposite
type of profile to that being created, i.e. if a printer profile is
being
created, specify a display profile (e.g. sRGB) as the source gamut. If
an display profile is being created, then specify a printer profile as
the source
(e.g. SWOP).&nbsp; When linking to the profile you have created this
way as the output profile, then use perceptual intent if the source is
the opposite type, and relative colorimetric if it is the same type.<br>
<br>
"Opposite type of profile" refers to the native gamut of the device,
and what its fundamental nature is, additive or subtractive. An
emissive display will have additive primaries (R, G &amp; B), while a
reflective print, will have subtractive primaries (C, M, Y &amp;
possibly others), irrespective of what colorspace the printer is driven
in (a printer might present an RGB interface, but internally this will
be converted to CMY, and it will have a CMY type of gamut).&nbsp;
Because of the complimentary nature of additive and subtractive device
primary colorants, these types of devices have the most different
gamuts, and hence need the most gamut mapping to convert from one
colorspace to the other.<br>
<br>
If you are creating a profile for a specific purpose, intending to link
it to a specific input profile, then you will get the best results by
specifying that source profile as the source gamut.<br>
<br>
If a profile is only going to be used as an input profile, or is going
to be used with a "smart" CMM (e.g. <a href="icclink.html">icclink</a>
<a href="icclink.html#g">-g</a> or <a href="icclink.html#G">-G</a>),
then it can save considerable processing time and space if the -b flag
is used, and the -S flag not used.<br>
<br>
For an RGB printer intended to print RGB originals, the following might
be a typical profile usage:<br>
<br>
<a href="profile.html">profile</a> <a href="profile.html#v">-v</a> <a
 href="profile.html#E">-D"Printer A"</a> <a href="profile.html#q">-qm</a>
<a href="profile.html#S">-S</a><a href="profile.html#S"> sRGB.icm</a> <a
 href="profile.html#c">-c2</a> <a href="profile.html#d">-d0</a>
<a href="profile.html#p1">PrinterA</a><br>
<br>
or if you intent to print from SWOP style CMYK originals:<br>
<br>
<a href="profile.html">profile</a> <a href="profile.html#v">-v</a> <a
 href="profile.html#E">-D"Printer A"</a> <a href="profile.html#q">-qm</a>
<a href="profile.html#S">-S</a><a href="profile.html#S">
swop.icm</a> <a href="profile.html#c">-c0</a> <a href="profile.html#d">-d0</a>
<a href="profile.html#p1">PrinterA</a><br>
<br>
For a CMYK printer, it would be normal to specify the type of black
generation, either as something simple, or as a specific curve. See the
details in <a href="profile.html#p">profile</a> for more details of
possible parameters. If you want to play about with the various black
generation parameters,<br>
then it might be a good idea to create a preliminary profile (using <a
 href="profile.html#q">-ql</a> <a href="profile.html#b">-b</a> and no <a
 href="profile.html#S">-S</a>), and then used <a href="xicclu.html#g">xicclu</a>
to explore the effect of the parameters. Normally the total ink limit
will be read from the <span style="font-weight: bold;">PrinterB.ti3</span>
file, and will be set at a level 10% lower than the number used in
creating the test chart values using <a href="targen.html#l">targen -l</a>.
If you want to override this with a lower limit, then use the <a
 href="profile.html#l">-l flag</a>.<br>
<br>
<a href="profile.html">profile</a> <a href="profile.html#v">-v</a> <a
 href="profile.html#E">-D"Printer B"</a> <a href="profile.html#q">-qm</a>
<a href="profile.html#S">-S</a><a href="profile.html#S"> sRGB.icm</a> <a
 href="profile.html#c">-c2</a> <a href="profile.html#d">-d0</a> <a
 href="profile.html#k">-kr</a>
<a href="profile.html#p1">PrinterB</a><br>
<br>
Make sure you check the delta E report at the end of the profile
creation, to see if the profile is behaving reasonably.<br>
<br>
<br>
<hr size="2" width="100%">
<h3><a name="LP1"></a>Linking Profiles</h3>
Two device profiles can be linked together to create a device link
profile,
than encapsulates a particular device to device transform. Often this
step is not necessary, as many systems and utilities will link two
device profiles "on the fly", but creating a device link profile gives
you the option of using "smart CMM" techniques, such as true gamut
mapping, improved inverse transform accuracy, tailored black
generation and
ink limiting.<br>
<br>
The overall process is to link the input space and
output space profiles using <a href="icclink.html">icclink</a>,
creating a device to device link profile. The device to device link
profile can then be used by cctiff (or other ICC device profile capable
utilities), to color
correct a raster files.<br>
<br>
Three examples will be given here, showing the three different modes
than <span style="font-weight: bold;">icclink</span> supports.<br>
<br>
In <a href="icclink.html#s">simple mode</a>, the two profiles are
linked together in a similar fashion to other <span
 style="font-weight: bold;">CMMs</span> simply using the forward and
backwards color transforms defined by the profiles. Any gamut mapping
is determined by the content of the tables within the two profiles,
together with the particular intent chosen. Typically the same intent
will be used for both the source and destination profile:<br>
<br>
<a href="icclink.html">icclink</a> <a href="icclink.html#v">-v</a> <a
 href="icclink.html#q">-qm</a> <a href="icclink.html#s">-s</a> <a
 href="icclink.html#si">-ip</a> <a href="icclink.html#so">-op</a> <a
 href="icclink.html#p1">SouceProfile.icm</a> <a href="icclink.html#p2">DestinationProfile.icm</a>
<a href="icclink.html#p3">Source2Destination.icm</a><br>
<br>
<br>
In <a href="icclink.html#g">gamut mapping mode</a>, the pre-computed
intent mappings inside the profiles are not used, but instead the gamut
mapping between source and destination is tailored to the specific
gamuts of the two profiles, and the intent parameter supplied to <span
 style="font-weight: bold;">icclink</span>. Additionally, source and
destination viewing conditions should be provided, to allow the color
appearance space conversion to work as intended:<br>
<br>
<a href="icclink.html">icclink</a> <a href="icclink.html#v">-v</a> <a
 href="icclink.html#q">-qm</a> <a href="icclink.html#g">-g</a> <a
 href="icclink.html#si">-ip</a> <a href="icclink.html#c">-c2</a> <a
 href="icclink.html#d">-d0</a> <a href="icclink.html#p1">MonitorSouceProfile.icm</a>
<a href="icclink.html#p2">DestinationProfile.icm</a>
<a href="icclink.html#p3">Source2Destination.icm</a><br>
<br>
<br>
In <a href="icclink.html#G">inverse output table gamut mapping mode</a>,
the pre-computed intent mappings inside the profiles are not used, but
instead the gamut mapping between source and destination is tailored to
the specific gamuts of the two profiles, and the intent parameter
supplied to <span style="font-weight: bold;">icclink</span>. In
addition, the B2A table is not used in the destination profile, but the
A2B table is instead inverted, leading to improved transform accuracy,
and in CMYK devices, allowing the ink limiting and black generation
parameters to be set.<br>
<br>
For a CLUT table based RGB printer destination profile, the following
would be appropriate:<br>
<br>
<a href="icclink.html">icclink</a> <a href="icclink.html#v">-v</a> <a
 href="icclink.html#q">-qm</a> <a href="icclink.html#G">-G</a> <a
 href="icclink.html#si">-ip</a> <a href="icclink.html#c">-c2</a> <a
 href="icclink.html#d">-d0</a> <a href="icclink.html#p1">MonitorSouceProfile.icm</a>
<a href="icclink.html#p2">RGBDestinationProfile.icm</a>
<a href="icclink.html#p3">Source2Destination.icm</a><br>
<br>
For a CMYK profile, the total ink limit needs to be specified (a
typical value being 10% less than the value used in creating the device
test chart), and the type of black generation also needs to be
specified:<br>
<br>
<a href="icclink.html">icclink</a> <a href="icclink.html#v">-v</a> <a
 href="icclink.html#q">-qm</a> <a href="icclink.html#G">-G</a> <a
 href="icclink.html#si">-ip</a> <a href="icclink.html#c">-c2</a> <a
 href="icclink.html#d">-d0</a> <a href="icclink.html#l">-l250</a> <a
 href="icclink.html#k">-kr</a> <a href="icclink.html#p1">MonitorSouceProfile.icm</a>
<a href="icclink.html#p2">CMYKDestinationProfile.icm</a>
<a href="icclink.html#p3">Source2Destination.icm</a><br>
<br>
Note that you should adjust the source (<a href="icclink.html#c">-c</a>)
and
destination (<a href="icclink.html#d">-d</a>)
viewing conditions for the type of device the profile represents, and
the conditions under which it will be viewed.<br>
<br>
<hr size="2" width="100%"><br>
<h3><a name="TR1"></a>Transforming colorspaces of raster files</h3>
Although a device profile or device link profile may be useful with
other programs and systems, Argyll provides the utility <a
 href="cctiff.html">cctiff</a> for directly applying a device to device
transform to a <a href="File_Formats.html#TIFF">TIFF</a> raster file.
The cctiff utility operating in one of two modes. In the default mode
the name of a device link profile must be supplied, and it will be used
to transform the pixel values of the input TIFF file. In the linking
mode, a source and destination device profile will be linked together
(equivalent to <a href="icclink.html">icclink</a> <a
 href="icclink.html#s">-s</a> mode, including the same <a
 href="icclink.html#i">-i</a> and <a href="icclink.html#o">-o</a>
options to select the source and destination rendering intents), and
the resulting device to device transform used to transform the pixel
values of the input TIFF file. Both 8 and 16 bit per component files
can be handled, and up to 8 color channels. The color transform is
optimized to performed the transformation rapidly.<br>
<br>
If a device link is to be used, the following is a typical example:<br>
<br>
<a href="cctiff.html">cctiff</a> <a href="cctiff.html#p1">Source2Destination.icm</a>
<a href="cctiff.html#p2">infile.tif</a> <a href="cctiff.html#p3">outfile.tif</a><br>
<br>
<br>
<i><br>
</i>If a source and destination profile are to be used, the following
would be a typical example:<br>
<br>
<br>
<a href="cctiff.html">
cctiff</a> <a href="cctiff.html#l">-l</a> <a href="cctiff.html#i">-ip</a>
<a href="cctiff.html#o">-op</a> <a href="cctiff.html#p1i">SourceProfile.icm</a>
<a href="cctiff.html#p1o">DestinationProfile.icm</a> <a
 href="cctiff.html#p2">infile.tif</a>
<a href="cctiff.html#p3">outfile.tif</a><br>
<br>
<br>
<br>
<hr size="2" width="100%"><br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
</body>
</html>
