<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>revfix</title>
  <meta http-equiv="content-type"
 content="text/html; charset=ISO-8859-1">
  <meta name="author" content="Graeme Gill">
</head>
<body>
<h2><b>xicc/revfix</b></h2>
<h3>Summary</h3>
Regenerate a CLUT device profiles B2A table data by inverting the A2B
table.<br>
<h3>Usage Summary</h3>
revfix [-options] iccin iccout<br>
&nbsp;-v&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Verbose<br>
&nbsp;-0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Process perceptual<br>
&nbsp;-1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Process absolute/relative colorimetric<br>
&nbsp;-2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Process saturation<br>
&nbsp;-r res&nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Override BtoA1
CLUT res.<br>
&nbsp;-k [ezhxr] &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e =
same K as existing BtoA table (def)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; z =
zero, h = 0.5 K, x = max K, r = ramp K<br>
&nbsp;-k p stle stpo enle enpo shape<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; p =
curve parameters<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; stle: K
level at White 0.0 - 1.0<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; stpo:
start point of transition Wh 0.0 - Bk 1.0<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; enpo:
End point of transition Wh 0.0 - Bk 1.0<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
enle: K level at Black 0.0 - 1.0<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; shape:
1.0 = straight, 0.0-1.0 concave, 1.0-2.0
convex<br>
&nbsp;-l tlimit&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set total ink limit, 0
- 400%
(default none)<br>
&nbsp;-L klimit&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set black ink limit, 0
- 100%
(default
none)<br>
&nbsp;-p aprof.icm&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Include abstract
profile in output tables<br>
&nbsp;-s&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Use internal optimized separation for CMYK<br>
<h3>Usage Details and Discussion</h3>
Existing ICC profiles may not contain accurately inverted AtoB table
data in their B2A tables, and this utility provides a means of
addressing this, or regenerating the B2A information with a different
black generation and/or ink limit, or applying an abstract correction
profile to the B2A table, without completely recreating the profile.<br>
<br>
Currently <b>revfix</b> does not support creating real perceptual or
saturation B2A tables, but can only create &nbsp;relative colorimetric
tables. It also will not handle CLUT profile that use a matrix element
in them.<br>
<br>
<b>-v</b>&nbsp; Turn on verbose mode. Gives progress information as the
table is created. Since B2A tables can take a long time to generate,
this is often useful to monitor progress.<br>
<br>
The B2A table to be re-creating can be specified by using the <b>-0</b>,
<b>-1</b>, and <b>-2</b>f lags. Normally only the <b>-1</b> flag
should be specified, but the perceptual and saturation tables can be
replaces instead/as well, if their respective flags are specified.<br>
<br>
Normally the re-created B2A table will have the same CLUT resolution as
the existing table, but this can be overridden by using the <b>-r</b>
flag.
Typically a resolution of 9 might be used for a medium quality CMYK
table,
with 17 being used for a high quality CMYK table. For an RGB profile, a
resolution of 17 might be used for a medium quality table, and 33 being
used for a high quality table.<br>
<br>
-<b>k</b> flag sets the amount of Under Color Removal, or black
generation level when creating B2A CMYK output tables. The black levels
specified by the flag are all in relation to the possible black values
for each color being created (the possible black locus), NOT the
absolute amount of black that will be used. For instance, at the white
point, no black will be used in the output, even if the black
generation specifies a maximum (since the maximum amount of black that
can be used to print white is actually zero). Similarly, at the black
point, black may well be used, even if the black generation specifies
zero black (since a certain amount of black is needed to achieve the
desired density of color). Possible arguments to the <b>-k</b> option
are:<br>
<br>
<b>-ke</b> selects a black level as similar as possible to the existing
B2A tables black level.<br>
<b> -kz</b> selects minimum black (0.0)<br>
<b> -kh</b> selects a black value of 0.5<br>
<b> -kx</b> selects the maximum possible black (1.0)<br>
<b> -kr</b> selects a linear ramp, starting at minimum black for
highlight, and maximum black for shadow (equivalent to -kp 0 0 1 1 1)<br>
<b>-k p stle stpo enpo enle shape</b>&nbsp; allows an arbitrary black
locus ramp to be defined, consisting of a starting value (stle) for
highlights, a breakpoint L value (stpo) where it starts to transition
to the shadow level, an end breakpoint L (enpo) where it flattens out
again, and the finishing black level (enle) for the shadows. There is
also a curve parameter, that modifies the transition from stle to enle
to either be concave (ie. the
transition starts gradually and and finished more abruptly) using
values 0.0-1.0, with 0.0 being most concave, or convex (the transition
starts more
abruptly but finishes gradually), using values 1.0-2.0, with 2.0 being
the
most convex.<br>
<br>
Typical lack locus generation curve with parameters something like: -kp
.1 .3 .5 .8 1<br>
<br>
<tt> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.0 K &nbsp; |
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;enpo<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp; &nbsp;_______&nbsp;
enle<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;/<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
|&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp; /<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp;/<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; /<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; stle&nbsp;
| ------/<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp;&nbsp;&nbsp; +-------------------<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0.0 K&nbsp;
0.0&nbsp;&nbsp;&nbsp; stpo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.0<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
White&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Black</tt><br>
<tt> </tt><br>
The <b>-l</b> <i>tlimit</i> parameter sets the ink limit (TAC, Total
Area Coverage) for the CMYK separation, as a total percentage from 0%
to 400%, and overrides any ink limit specified in the .ti3 file. The
limit value should generally be set a little below the value used in
the test chart
generation, to avoid the very edges of the gamut. If the test chart ink
limit has been chosen to be a little beyond an acceptable level, then
this
number should be the acceptable level. Although limits can be set below
200%, this will generally restrict the color gamut noticeably, as fully
saturated
secondary colors will not be reproduced. Values are between 220% and
300%
for typical printing devices.<br>
<br>
<a name="L"></a> The <b>-L</b> <i>klimit</i> parameter sets the black
channel ink limit for the CMYK separation, as a total percentage from
0%
to 100%. For printing press like devices, this can be used to prevent
the
black channel screening pattern "filling in". Typical values might be
from
95% to 99%. <br>
<br>
The <b><a name="p"></a>-p</b> option allows specifying an abstract
profile be applied to all of the output tables. An abstract
profile is a way of specifying a color adjustment in a device
independent way. The abstract profile might have been created using one
of the <span style="font-weight: bold;">tweak</span> tools, such as <a
 href="refine.html">refine</a>.<br>
<br>
The <b>-s</b> flag is not currently implemented.<br>
<br>
&nbsp;<br>
<br>
<br>
</body>
</html>
