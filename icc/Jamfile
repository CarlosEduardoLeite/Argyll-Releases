 
# JAM style makefile for icclib and friends

#SubDir TOP icc ;

CCFLAGS 	+= $(CCOPTFLAG) ;		# Turn optimisation on
#CCFLAGS	    += -Wextra $(CCDEBUGFLAG) ;		# Debugging flags
#CCFLAGS	+= $(CCHEAPDEBUG) ;		# Heap Debugging flags
LINKFLAGS	+= $(LINKDEBUGFLAG) ;	# Link debugging flags

#if stdio is not wanted in icclib:
#CCFLAGS	+= $(DEFFLAG)SEPARATE_STD ;

#Products
Libraries = libicc ;
Executables = iccdump icclu ;
Headers = icc.h ;

#Install
InstallBin $(DOTDOT)$(SLASH)bin : $(Executables)$(SUFEXE) ;
#InstallFile $(DOTDOT)$(SLASH)h : $(Headers) ;
#InstallLib $(DOTDOT)$(SLASH)lib : $(Libraries)$(SUFLIB) ;

# ICC library
Library libicc.lib : icc.c ;

# Executable support
Object iccstd$(SUFOBJ) : iccstd.c ;

# Utilities / test programs
# Main icctest : icctest.c ;
Object icctest$(SUFOBJ) : icctest.c ;
MainFromObjects icctest : icctest$(SUFOBJ) iccstd$(SUFOBJ) ;
LinkLibraries icctest : libicc.lib ;

Object lutest$(SUFOBJ) : lutest.c ;
MainFromObjects lutest : lutest$(SUFOBJ) iccstd$(SUFOBJ) ;
LinkLibraries lutest : libicc.lib ;

Object iccdump$(SUFOBJ) : iccdump.c ;
MainFromObjects iccdump : iccdump$(SUFOBJ) iccstd$(SUFOBJ) ;
LinkLibraries iccdump : libicc.lib ;

Object icclu$(SUFOBJ) : icclu.c ;
MainFromObjects icclu : icclu$(SUFOBJ) iccstd$(SUFOBJ) ;
LinkLibraries icclu : libicc.lib ;

Object iccrw$(SUFOBJ) : iccrw.c ;
MainFromObjects iccrw : iccrw$(SUFOBJ) iccstd$(SUFOBJ) ;
LinkLibraries iccrw : libicc.lib ;

#Monotonic behaviour checker
#Object mcheck$(SUFOBJ) : mcheck.c ;
#MainFromObjects mcheck : mcheck$(SUFOBJ) iccstd$(SUFOBJ) ;
#LinkLibraries mcheck : libicc.lib ;

if $(BUILD_JUNK) {

	Object tt$(SUFOBJ) : tt.c ;
	MainFromObjects tt : tt$(SUFOBJ) ;
	LinkLibraries tt : libicc.lib ;

	Object mkAdobeRGB$(SUFOBJ) : mkAdobeRGB.c ;
	MainFromObjects mkAdobeRGB : mkAdobeRGB$(SUFOBJ) iccstd$(SUFOBJ) ;
	LinkLibraries mkAdobeRGB : libicc.lib ;

	Object lab2lab$(SUFOBJ) : lab2lab.c ;
	MainFromObjects lab2lab : lab2lab$(SUFOBJ) iccstd$(SUFOBJ) ;
	LinkLibraries lab2lab : libicc.lib ;

	Main icm2ary : icm2ary.c ;

	# Check library is compatible with C++
	Main cppcheck : cppcheck.cpp ;

	# chech CIEDE2000
	Main testDE2K : testDE2K.c ;
	LinkLibraries testDE2K : libicc.lib ;
}


